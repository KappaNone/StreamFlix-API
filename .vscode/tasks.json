{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Stack: Start (Docker + Frontend)",
			"dependsOrder": "sequence",
			"dependsOn": [
				"Docker: Up (build)",
				"Frontend: Restart (5174)"
			],
			"problemMatcher": []
		},
		{
			"label": "Docker: Up (build)",
			"type": "shell",
			"command": "docker compose up -d --build",
			"isBackground": false,
			"problemMatcher": []
		},
		{
			"label": "Frontend: Restart (5174)",
			"type": "shell",
			"command": "cmd /c \"for /f \\\"tokens=5\\\" %%a in ('netstat -aon ^| find \\\":5174\\\" ^| find \\\"LISTENING\\\"') do taskkill /F /PID %%a /T >nul 2>nul & npx --yes serve frontend -l 5174\"",
			"isBackground": true,
			"problemMatcher": []
		},
		{
			"label": "Restart Nest dev server",
			"type": "shell",
			"command": "docker restart streamflix-api-server-1",
			"isBackground": false,
			"problemMatcher": []
		}
	]
}